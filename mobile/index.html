<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ì ‘ìˆ˜ í˜„í™©</title>
  <link rel="stylesheet" href="/css/layout.css">
  <link rel="stylesheet" href="/mobile/css/mobile.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/js/supabaseclient.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
  <!-- ê³µí†µ í—¤ë” -->
  <div id="header"></div>
  
  <!-- ê³µí†µ Drawer -->
  <div id="drawer-container"></div>
  
  <script>
    Promise.all([
      fetch("/components/header.html").then(r => r.text()),
      fetch("/components/drawer.html").then(r => r.text())
    ]).then(([header, drawer]) => {
      document.getElementById("header").innerHTML = header;
      document.getElementById("drawer-container").innerHTML = drawer;
      
      // í˜ì´ì§€ íƒ€ì´í‹€ ì„¤ì •
      const script = document.createElement("script");
      script.src = "/js/layout.js";
      script.onload = () => {
        if (window.updatePageTitle) {
          window.updatePageTitle('ì ‘ìˆ˜ í˜„í™©');
        }
        if (window.initLayout) {
          window.initLayout();
        }
      };
      document.body.appendChild(script);
    });
  </script>

  <!-- ì»¨í…ì¸  -->
  <div class="m-content" style="padding-top: 48px;">
    <div class="m-container">
      <!-- KPI ì¹´ë“œ (í† ìŠ¤ ìŠ¤íƒ€ì¼) -->
      <div class="m-kpi-grid" id="kpiGrid">
        <div class="m-kpi-card">
          <div class="m-kpi-label">ì˜¤ëŠ˜ ì ‘ìˆ˜</div>
          <div class="m-kpi-value" id="todayCount">0</div>
        </div>
        <div class="m-kpi-card">
          <div class="m-kpi-label">ì§„í–‰ì¤‘</div>
          <div class="m-kpi-value" id="inProgressCount">0</div>
        </div>
        <div class="m-kpi-card">
          <div class="m-kpi-label">ì™„ë£Œ</div>
          <div class="m-kpi-value" id="completedCount">0</div>
        </div>
        <div class="m-kpi-card">
          <div class="m-kpi-label">ì •ì‚°ëŒ€ê¸°</div>
          <div class="m-kpi-value" id="settlementCount">0</div>
        </div>
      </div>

      <!-- ì ‘ìˆ˜ ë¦¬ìŠ¤íŠ¸ -->
      <div id="receiptList">
        <div class="m-loading">ë¡œë”© ì¤‘...</div>
      </div>
    </div>
  </div>

  <!-- í”Œë¡œíŒ… ë²„íŠ¼ -->
  <button class="m-fab" onclick="window.location.href='/mobile/receive.html'">â•</button>

  <!-- í•˜ë‹¨ íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
  <div class="m-bottom-nav">
    <div class="m-bottom-nav-item active" data-page="status">
      <div class="m-bottom-nav-icon">ğŸ“‹</div>
      <div class="m-bottom-nav-label">ì ‘ìˆ˜í˜„í™©</div>
    </div>
    <div class="m-bottom-nav-item" data-page="receive">
      <div class="m-bottom-nav-icon">â•</div>
      <div class="m-bottom-nav-label">ì ‘ìˆ˜</div>
    </div>
    <div class="m-bottom-nav-item" data-page="map">
      <div class="m-bottom-nav-icon">ğŸ“</div>
      <div class="m-bottom-nav-label">ì§€ë„</div>
    </div>
    <div class="m-bottom-nav-item" data-page="message">
      <div class="m-bottom-nav-icon">ğŸ’¬</div>
      <div class="m-bottom-nav-label">ë©”ì‹œì§€</div>
    </div>
    <div class="m-bottom-nav-item" data-page="more">
      <div class="m-bottom-nav-icon">â‹¯</div>
      <div class="m-bottom-nav-label">ë”ë³´ê¸°</div>
    </div>
  </div>

  <script src="/mobile/js/status.js"></script>
</body>
</html>

